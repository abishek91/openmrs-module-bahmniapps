<div class="reg-body-wrapper">

<div class="non-printable" xmlns="http://www.w3.org/1999/html">
    <div>
        <form name="myForm" ng-init="disableFormSubmitOnEnter()" class="visit-patient" ng-submit="submit()">
                <legend class="mylegend"><span><strong>Summary</strong></span></legend>
                    <div class="photo-container-wrapper">
                        <span class="pull-right photo-container">
                                <img id="patient-image" ng-src="{{patient.image}}"
                                     onerror="this.onerror=null;this.src='../images/blank-user.gif';"/>
                                <div ng-model="patient.image" capture-photo="updatePatientImage" class="capture-photo-btn"></div>
                         </span>
                    </div>

                <section>
                <div class="form-field">
                        <div class="field-attribute">
                            <label  for="patientId">Patient Identifier</label>
                        </div>

                        <div class="field-value">
                                <input id="patientId" ng-model="patient.identifier" readonly type="text">
                        </div>
                </div>
                <div class="form-field photocontainer-spacing">
                        <div class="field-attribute">
                            <label class="control-label" for="patientName">Patient Name</label>
                        </div>

                        <div class="field-value">
                             <input id="patientName" ng-model="patient.name" readonly type="text">
                        </div>
                </div>
                </section>

            <!-- TODO: need to find a better way to render the directive again on context change or after all the calls are made.-->
            <section class="observation-section" ng-if="context">
                <div ng-repeat="conceptSet in availableConceptSets" class="concept-set-group section-grid">
                    <div class="concept-set-title">
                        <legend class="mylegend">
                            <strong>{{conceptSet.options.conceptName}}</strong>
                        </legend>
                    </div>
                    <div ng-if="conceptSet.options.showLatest">
                        <div class="obs-section right" style="width: 45%">
                            <latest-obs patient-uuid="patient.uuid" concept-names="conceptSet.options.conceptNames"/>
                        </div>
                        <div class="left" style="width: 50%">
                            <concept-set concept-set-name="conceptSet.options.conceptName" required="conceptSet.options.required" 
                            observations="observations" obs-scope="conceptSet.options.scope" show-title="false"></concept-set>
                        </div>
                    </div>
                    <div ng-if="!conceptSet.options.showLatest">
                        <concept-set concept-set-name="conceptSet.options.conceptName" required="conceptSet.options.required" 
                        observations="observations" obs-scope="conceptSet.options.scope" show-title="false"></concept-set>
                    </div>
                </div>
            </section>


            <div class="submit-btn-container" ng-switch on="patient.isNew">
                <div class="right" ng-switch-when="true">
                    <button type="button" ng-click="back()">Back</button>
                    <button type="submit" class="confirm" ng-click="submitBtnClicked('savePrint')">Save and Print</button>
                </div>
                <div class="right" ng-switch-default>
                    <button type="button" ng-click="back()">Back</button>
                    <button type="submit" ng-click="submitBtnClicked('savePrint')">Save and Print</button>
                    <button type="submit" class="confirm" ng-click="submitBtnClicked('save')" >Save</button>
                </div>
                <div ng-show="allowPrintingSupplementalPaper">
                    <button type="button" ng-click="printSupplemental()">Print Supplemental Paper</button>
                </div>
            </div>

        </form>
        <br>
    </div>
</div>
</div>